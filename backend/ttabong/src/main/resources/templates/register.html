<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입 (봉사자)</title>
</head>
<body>
    <h1>회원가입 (봉사자)</h1>
    <form id="signupForm">
        <fieldset>
            <legend>기본 정보</legend>
            <label for="email">이메일:</label>
            <input type="email" id="email" name="email" required /><br><br>

            <label for="name">이름:</label>
            <input type="text" id="name" name="name" required /><br><br>

            <label for="password">비밀번호:</label>
            <input type="password" id="password" name="password" required /><br><br>

            <label for="phone">전화번호:</label>
            <input type="text" id="phone" name="phone" required /><br><br>

            <label for="profileImage">프로필 이미지 URL:</label>
            <input type="text" id="profileImage" name="profileImage" /><br><br>
        </fieldset>

        <fieldset>
            <legend>봉사자 정보</legend>
            <label for="preferredTime">선호 시간:</label>
            <input type="text" id="preferredTime" name="preferredTime" /><br><br>

            <label for="interestTheme">관심 테마:</label>
            <input type="text" id="interestTheme" name="interestTheme" /><br><br>

            <label for="durationTime">봉사 소요 시간:</label>
            <input type="text" id="durationTime" name="durationTime" /><br><br>

            <label for="region">지역:</label>
            <input type="text" id="region" name="region" /><br><br>

            <label for="birthDate">생년월일:</label>
            <input type="date" id="birthDate" name="birthDate" /><br><br>

            <label for="gender">성별 (M/F):</label>
            <input type="text" id="gender" name="gender" maxlength="1" /><br><br>
        </fieldset>

        <button type="submit">회원가입</button>
    </form>
    <div id="result" style="margin-top:20px; color:blue;"></div>

    <script>
        document.getElementById("signupForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const payload = {
                email: document.getElementById("email").value,
                name: document.getElementById("name").value,
                password: document.getElementById("password").value,
                phone: document.getElementById("phone").value,
                profileImage: document.getElementById("profileImage").value,
                preferredTime: document.getElementById("preferredTime").value,
                interestTheme: document.getElementById("interestTheme").value,
                durationTime: document.getElementById("durationTime").value,
                region: document.getElementById("region").value,
                birthDate: document.getElementById("birthDate").value,
                gender: document.getElementById("gender").value
            };

            fetch("/api/auth/signup/volunteer", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(payload)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error("회원가입 실패: " + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                document.getElementById("result").innerText = "회원가입 성공: " + JSON.stringify(data);
            })
            .catch(error => {
                document.getElementById("result").innerText = error;
            });
        });
    </script>
</body>
</html>
